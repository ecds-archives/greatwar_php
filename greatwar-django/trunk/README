Overview
========

The Great War is a website produced from texts encoded in the Text Encoding Initiativeâ€™s (TEI) standards.
It consists of 3 parts, poetry, postcards, and links.

README
======

Dependencies
------------
 * django 1.2
 * pidmanclient
 * eXist-db 1.4
 * eulcore (currently included as a subversion external); see
   :ref:`eulcore dependencies <eulcore-deps>` for per-module
   dependencies. eulcore modules currently in use:

   * eulcore.xmlmap
   * eulcore.existdb and eulcore.django.existdb
   * eulcore.django.ldap
   * eulcore.django.testsetup
   * eulcore.django.http

Installation
------------
To install all the necessary components for a development environment
on an Ubuntu 10.04 workstation:

sudo apt-get install python-ldap python-lxml python-ply python-dateutil fop libldap2-dev libsasl2-dev libssl-dev

This assumes you already have a django 1.2 installation and python bindings
for the database platform you are using (e.g., python-mysqldb for mysql).


Create a virtualenvironment
---------------------------
sudo pip install virtualenv

If the source is in /home/greatwar/src, consider creating an environment in  /home/greatwar/greatwarEnv.
To create the environment, su into apache's user (for local development do not su to another user)
and::
	  $ virtualenv --no-site-packages /home/greatwar/greatwarEnv

This creates a new virtual environment in that directory. Source the activation
file to invoke the virtual environment (requires that you use the bash shell)::

	  $ . /home/greatwar/greatwarEnv/bin/activate

Once the environment has been activated inside a shell, Python programs
spawned from that shell will read their environment only from this
directory, not from the system-wide site packages. Installations will
correspondingly be installed into this environment.

Note::
Installation instructions and upgrade notes below assume that
you are already in an activated shell.

Install python dependencies
---------------------------
To install python dependencies, cd into the repository checkout and::

	  $ pip install -r pip-dependencies

The user 'greatwarusr' will have to be created through the pidman admin interface
Use the permissions:
    Staff = true
    Can add pid
    Can change pid
    Can delete pid
    Can add target
    Can change target
    Can delete target

The 'Great War' will have to be created as a sub-domain of BeckCenter if it does not already exist.
Host, user, pass, and doman wil have to be configured in local_settings in the PIDMAN_* variables.

Install and configure like other django applications. 

Copy ``localsettings-sample.py`` to ``localsettings.py`` and customize the settings.

The configured eXist-db user should be in the DBA group if you plan to
use the app to manage the eXist index configuration. For more
information on existdb index commands::

     $ ./manage.py help existdb_index
     $ ./manage.py help existdb_reindex

For a first-time install, you will should run these two steps: 
(Note that if all finding aids are loaded, the reindex step can take quite a while)::

     $ ./manage.py existdb_index load
     $ ./manage.py existdb_reindex

